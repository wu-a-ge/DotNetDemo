jsUnity=function(){function a(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\?/g,function(){return b.shift()})}function b(a){if(a instanceof Object){var c=[];for(var d in a){c.push(d);c.push(b(a[d]))}return c.join("#")}else return String(a)}var i={assertException:function(b,c){try{b instanceof Function&&b()}catch(d){return}throw a("?: (?) does not raise an exception or not a function",c||"assertException",b);},assertTrue:function(b,c){if(!b)throw a("?: (?) does not evaluate to true",c||"assertTrue",b);},assertFalse:function(b,c){if(b)throw a("?: (?) does not evaluate to false",c||"assertFalse",b);},assertIdentical:function(b,c,d){if(b!==c)throw a("?: (?) is not identical to (?)",d||"assertIdentical",c,b);},assertNotIdentical:function(b,c,d){if(b===c)throw a("?: (?) is identical to (?)",d||"assertNotIdentical",c,b);},assertEqual:function(c,d,e){if(b(c)!=b(d))throw a("?: (?) is not equal to (?)",e||"assertEqual",d,c);},assertNotEqual:function(c,d,e){if(b(c)==b(d))throw a("?: (?) is equal to (?)",e||"assertNotEqual",d,c);},assertMatch:function(c,b,d){if(!c.test(b))throw a("?: (?) does not match (?)",d||"assertMatch",b,c);},assertNotMatch:function(c,b,d){if(c.test(b))throw a("?: (?) matches (?)",d||"assertNotMatch",b,c);},assertTypeOf:function(c,b,d){if(typeof b!==c)throw a("?: (?) is not of type (?)",d||"assertTypeOf",b,c);},assertNotTypeOf:function(c,b,d){if(typeof b===c)throw a("?: (?) is of type (?)",d||"assertNotTypeOf",b,c);},assertInstanceOf:function(c,b,d){if(!(b instanceof c))throw a("?: (?) is not an instance of (?)",d||"assertInstanceOf",b,c);},assertNotInstanceOf:function(c,b,d){if(b instanceof c)throw a("?: (?) is an instance of (?)",d||"assertNotInstanceOf",b,c);},assertNull:function(b,c){if(b!==null)throw a("?: (?) is not null",c||"assertNull",b);},assertNotNull:function(b,c){if(b===null)throw a("?: (?) is null",c||"assertNotNull",b);},assertUndefined:function(b,c){if(b!==undefined)throw a("?: (?) is not undefined",c||"assertUndefined",b);},assertNotUndefined:function(b,c){if(b===undefined)throw a("?: (?) is undefined",c||"assertNotUndefined",b);},assertNaN:function(b,c){if(!isNaN(b))throw a("?: (?) is not NaN",c||"assertNaN",b);},assertNotNaN:function(b,c){if(isNaN(b))throw a("?: (?) is NaN",c||"assertNotNaN",b);},fail:function(a){throw a||"fail";}};function c(a,b){return a+" "+b+(a==1?"":"s")}function e(b){var a=/^[\s\r\n]*function[\s\r\n]*([^\(\s\r\n]*?)[\s\r\n]*\([^\)\s\r\n]*\)[\s\r\n]*\{((?:[^}]*\}?)+)\}[\s\r\n]*$/.exec(b);if(!a)throw"Invalid function.";return{name:a[1].length?a[1]:undefined,body:a[2]}}var f=function(){try{return eval(["typeof ",' === "function" && ',""].join(arguments[0]))}catch(a){return false}};function g(h){var b={},i=new Function(e(f).body+h),j=/(\w+)/g,g;while(g=j.exec(h)){var a=g[1],c;if(!b[a]&&(c=i(a))&&c!=f(a))b[a]=c}return d(b)}function h(c){var a=e(c),b=g(a.body);b.suiteName=a.name;return b}function j(g){for(var b={},c=0;c<g.length;c++){var a=g[c];if(!b[a])switch(typeof a){case"function":var i=e(a);b[i.name]=a;break;case"string":var h;if(h=f(a))b[a]=h}}return d(b)}function d(b){var c=new jsUnity.TestSuite(b.suiteName,b);for(var a in b)if(b.hasOwnProperty(a)){var d=b[a];if(typeof d==="function")if(/^test/.test(a))c.tests.push({name:a,fn:d});else if(/^setUp|tearDown$/.test(a))c[a]=d}return c}return{TestSuite:function(a,b){this.suiteName=a;this.scope=b;this.tests=[];this.setUp=undefined;this.tearDown=undefined},TestResults:function(){this.suiteName=undefined;this.total=0;this.passed=0;this.failed=0;this.duration=0},assertions:i,env:{defaultScope:this,getDate:function(){return new Date}},attachAssertions:function(a){a=a||this.env.defaultScope;for(var b in jsUnity.assertions)a[b]=jsUnity.assertions[b]},log:function(){},error:function(a){this.log("[ERROR] "+a)},compile:function(a){if(a instanceof jsUnity.TestSuite)return a;else if(a instanceof Function)return h(a);else if(a instanceof Array)return j(a);else if(a instanceof Object)return d(a);else if(typeof a==="string")return g(a);else throw"Argument must be a function, array, object, string or TestSuite instance.";},run:function(){for(var a=new jsUnity.TestResults,h=[],i=jsUnity.env.getDate(),f=0;f<arguments.length;f++){try{var b=jsUnity.compile(arguments[f])}catch(j){this.error("Invalid test suite: "+j);return false}var e=b.tests.length;this.log("Running "+(b.suiteName||"unnamed test suite"));this.log(c(e,"test")+" found");h.push(b.suiteName);a.total+=e;for(var g=0;g<e;g++){var d=b.tests[g];try{b.setUp&&b.setUp();d.fn.call(b.scope);b.tearDown&&b.tearDown();a.passed++;this.log("[PASSED] "+d.name)}catch(j){b.tearDown&&b.tearDown();this.log("[FAILED] "+d.name+": "+j)}}}a.suiteName=h.join(",");a.failed=a.total-a.passed;a.duration=jsUnity.env.getDate()-i;this.log(c(a.passed,"test")+" passed");this.log(c(a.failed,"test")+" failed");this.log(c(a.duration,"millisecond")+" elapsed");return a}}}();function test(){alert("你好")}